<!DOCTYPE html>
<html lang="en">
  <head>
    <title>EventsGo User Profile</title>
	<meta charset="utf-8"/>
    <style>
      body {
	    background-color: lightblue;
	    width: 100%;
		height: 100%;
        overflow-x: hidden;
	  }
      html {
	    width: 100%;
		height: 100%;
	  }
	  #home {
	    text-align: center;
	  }
      .data {
        width: 66%;
        height: 50%;
        float: right;
        background-color: violet;
        border-radius: 10%;
        
      }
      .image {
        width: 33%;
        float: left;
        height: 75%;
        text-align: center;
      }
      
      #round {
        border-radius: 50%;
        width: 100px;
      }
      .persData {
        margin-left: 45px;
        
      }
      .editButtons {
        position: relative;
        text-align: center;
      }
      .edit {
        width: 100px;    
        filter: blur(1px);
        cursor: pointer;
      }
      .edit:hover {
        background-color: violet;
      }
      figcaption{
        font-weight: bold;
      }
    </style>
  </head>
  <body>
    <script src="https://www.gstatic.com/firebasejs/5.5.8/firebase.js"></script>
    <script>
      // Initialize Firebase
      var config = {
        apiKey: "AIzaSyDCa_8SolFzkpl9m292jOa4Uz-GY6eMALg",
        authDomain: "comp1930project.firebaseapp.com",
        databaseURL: "https://comp1930project.firebaseio.com",
        projectId: "comp1930project",
        storageBucket: "comp1930project.appspot.com",
        messagingSenderId: "678746640473"
      };
      firebase.initializeApp(config);
      var myURL = window.location.href;
      var myUserURL = myURL.split("?");
      var userNameString = myUserURL[1].split("=");
      var myUser = userNameString[1];
      //username string is saved in myUser variable
      var root = firebase.database().ref().child('usernames');
      root.on('value', function(snap){
        snap.forEach(function(childNodes){
          var tempUser = childNodes.val().username;
          if (tempUser === myUser){
            //alert(childNodes.val().fName);
            var myFirst = childNodes.val().fName;
            var myLast = childNodes.val().lName;
            var int = childNodes.val().interest;
            document.getElementById("fName").innerHTML = "<b>First Name</b> = " + myFirst;
            document.getElementById("lName").innerHTML = "<b>Last Name</b> = " + myLast;
            document.getElementById("interest").innerHTML = "<b>Interests</b> = " + int;
            document.getElementById("home").innerHTML = "Hello " + tempUser + ", welcome to EventsGo."
          }
        }) 
      })
      $('#eventPage').click(function(){
        
      })
      $('#groupPage').click(function(){
        
      })
      function editPage(){
        var myURL = window.location.href;
        var myUserURL = myURL.split("?");
        var userNameString = myUserURL[1].split("=");
        var myUser = userNameString[1];
        window.location = "./edit/editPage.html?username=" + myUser;
      }
      function groupPage(){
        var myURL = window.location.href;
        var myUserURL = myURL.split("?");
        var userNameString = myUserURL[1].split("=");
        var myUser = userNameString[1];
        window.location = "./groups/groupHome.html?username=" + myUser;
      }
    </script>
    <h1 id='home'></h1>
    <div class='image'>
	  <img id="round" src='https://dummyimage.com/300'/>
      <figcaption>(Profile pic goes here)</figcaption>
      <a id='eventPage' href='./events/eventHome.html'><img class='edit' src='../images/calendar.png' /></a>
      <figcaption>Events Page</figcaption>
      <img class='edit' onclick="groupPage()" src="../images/group.png" />
      <figcaption>Groups Page</figcaption>
      <img class='edit' onclick="editPage()" src='../images/edit.png' />
      <figcaption>Edit Info</figcaption>
	</div>
    <div class='data'>
      <h3 class='persData'>Personal Information</h3>
      <ul>
        <li class='persData' id="fName"></li>
        <li class='persData' id="lName"></li> 
        <li class='persData' id="interest"></li>
        <li class='persData'>Groups:
          <ol>
            <li>York Highschool '17</li>
            <li>Cane Family</li>
          </ol>
        </li>
      </ul>
    </div>
  </body>
  <footer></footer>
</html>