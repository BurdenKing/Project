<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Vote for an event</title>
	<meta charset="utf-8"/>
    <script src="https://www.gstatic.com/firebasejs/5.5.8/firebase.js"></script>
    <script>
          // Initialize Firebase
var config = {
    apiKey: "AIzaSyDCa_8SolFzkpl9m292jOa4Uz-GY6eMALg",
    authDomain: "comp1930project.firebaseapp.com",
    databaseURL: "https://comp1930project.firebaseio.com",
    projectId: "comp1930project",
    storageBucket: "comp1930project.appspot.com",
    messagingSenderId: "678746640473"
            };
    firebase.initializeApp(config);
  
    var database = firebase.database();
    var ref = database.ref().child('events');
    
    

    //isValidUser validates if user have the access to events.
    var myURL = window.location.href;
    var myUserURL = myURL.split("?");
    var userNameString = myUserURL[1].split("=");
    var myUser = userNameString[1];
    
    
 
    var ref = database.ref().child('events');

        


    var now = new Date().valueOf();
        
        

        
        
  
    ref.on('value', function(snapshot) {
    
    
        
    snapshot.forEach(function(childSnapshot) {
      var myEventsName = childSnapshot.val().Event_Name;
      var myDateAndTime = childSnapshot.val().DateAndTime;
      if(Date.parse(myDateAndTime) >= now && isValidUser){
      eventsArray.push(myEventsName);
      }

    });
        

    

        
    for(var i = 0; i < eventsArray.length; i++){
        var temp = document.createElement('event');
        temp.innerHTML = eventsArray[i];
        document.body.appendChild(temp);
        var Btn= document.createElement('input');
        Btn.setAttribute("type", "button");
        Btn.setAttribute("value", "vote");
        Btn.setAttribute("id", "voteBtn");
        Btn.setAttribute("onClick", myOnClick);
        
        function myOnClick{
            
        }
    document.body.appendChild(Btn);
    }

        
    var lineBreak = document.createElement('br');
    document.body.appendChild(lineBreak);
    var myBtn = document.createElement('input');
        myBtn.setAttribute("type", "button");
        myBtn.setAttribute("value", "submit");
    document.body.appendChild(myBtn);
    
     myBtn.onclick = function(){
         ref.on('value', getData);
         function get
    var lineBreak = document.createElement('br');
    document.body.appendChild(lineBreak);
    ref.on('value', function(snapshot) {  
    snapshot.forEach(function(childSnapshot) {
      var myEventsName = childSnapshot.val().Event_Name;
      var myDateAndTime = childSnapshot.val().DateAndTime;
      var myVoteCount = childSnapshot.val().VoteCount;
      if(Date.parse(myDateAndTime) >= now && isValidUser){
      eventsArray.push(myEventsName);
      voteCountArray.push(myVoteCount);
      }

    })
    })
         for(var i = 0; i < eventsArray.length; i++){
             
             var temp = document.createElement('result');
             temp.innerHTML = eventsArray[i] + " Votes : " + voteCountArray[i];
             document.body.appendChild(temp);
             var lineBreak = document.createElement('br');
             document.body.appendChild(lineBreak);
         }

                     
                 }
             });
    

        
    
    
       
      </script>    
    
    

      
 
<!--
    <style>
      h1 {
        margin-top: 2.3em;
        text-align: center;
        font-size: 35pt;
        color: #45A29E;
        padding-top: .8em; 
      }
        
      body {
	    background-color: #1F2833;
        color: #66FCF1;
	    width: 100%;
		height: 100%;
        overflow-x: hidden;
	  }
        
      #submit {
        margin-top: 1em;
        text-align: center;      
      }
        
      #content {
        margin: 0 auto; 
        width: 500px;
        text-align: center;
      }
        
      .info {
        margin-top: 2em;
        font-size: 15pt;
        height: 40px;
        width: 350px;
        display: inline-block;
        text-align: center;
      }
    
      .infomain {
        margin-top: 0em;
        font-size: 15pt;
        height: 40px;
        width: 350px;
        text-align: center;
      }
        
      #background {
        margin: 0 auto;
        width: 35%;
        background-color: white;
        padding-left: 1.5em;
        padding-right: 1.5em;
        padding-bottom: 2em;
      }
        
      #back {
        padding-top: 3em;
        padding-left: 3em;
        width: 5em;
        height: 3em;
        cursor: pointer;
      }
        
      #button {
        text-align: center;
	    
	  }
        
      #button:hover{
        background-color: #45A29E;      
      }
        
      #submit {
        margin: 0 auto;
      }
        
      #myBtn {
	    background-color: #0B0C10;
        border: 2px solid #66FCF1;
        color: #C5C6C7;
		cursor: pointer;
		font-size: 20px;
		text-align: center;
		padding: 5px 5px;
		margin-top: 2em;
		width: 350px;
        height: 40px;
	  }
        
      #myBtn:hover{
        background-color: #45A29E;      
      }
    </style>

-->
      
  </head>
  <body>
  <h1> Voting Page</h1>
      
  </body>
</html>

<!-- Code will be added to another page..skeleton -->
