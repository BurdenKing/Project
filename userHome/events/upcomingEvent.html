
<!DOCTYPE html>
<html lang = "en">
    <head>
    <title>Upcoming Events</title>
    <meta charset="utf-8"/>    
    <script src="https://www.gstatic.com/firebasejs/5.5.8/firebase.js"></script>




        
        
    <script>
    // Initialize Firebase
    var config = {
    apiKey: "AIzaSyDCa_8SolFzkpl9m292jOa4Uz-GY6eMALg",
    authDomain: "comp1930project.firebaseapp.com",
    databaseURL: "https://comp1930project.firebaseio.com",
    projectId: "comp1930project",
    storageBucket: "comp1930project.appspot.com",
    messagingSenderId: "678746640473"
    };
    firebase.initializeApp(config); 
    
    var database = firebase.database();
    
    
        
    var ref = database.ref().child('events');
    var dispGroup = database.ref().child('groups'); 
    ref.on('value', getEvent, errEvent);
    
    var now = new Date().valueOf();
    console.log(now);     

        
    function getEvent(event){
    var events = event.val();
    var eventsArray = Object.keys(events);
       
    for(var i = 0; i < eventsArray.length; i++){
        var k = eventsArray[i];
        var myEventName = events[k].Event_Name;
        var myDateAndTime = events[k].DateAndTime;
        

        
        
        
        var li = document.createElement('div');
        li.innerHTML = myEventName;

      if(Date.parse(myDateAndTime) >= now){
        document.body.appendChild(li);  
   }

    }
    var btn = document.createElement("input");
    btn.setAttribute("type", "button" );
    btn.setAttribute("value", "Go Vote!");
    btn.setAttribute('id', "myBtn");
    document.body.appendChild(btn);
        
        btn.onclick = function(){
      var myURL = window.location.href;
      var myUserURL = myURL.split("?");
      var userNameString = myUserURL[1].split("=");
      var myUser = userNameString[1];
      window.location.href = "./vote.html?username=" + myUser ;
    }
  
}
        
    function errEvent(err){
        alert("Error!");
        
    }
    

    </script>    
    </head>
    <body>
    <h1> Upcoming Events</h1>
    <p>
    </p>
    </body>
</html>

